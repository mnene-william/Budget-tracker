<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Budget Tracker</h1>
        <header class="header1">
            <div>
                <h5>Total Balance</h5>
                <span id="balance">$0.00</span>
            </div>
            <div>
                <h5>Income</h5>
                <span id="income">$0.00</span>
            </div>
            <div>
                <h5>Expense</h5>
                <span id="expense">$0.00</span>
            </div>
            
              
           
        </header>
        <h2>Add Transaction</h2>
        <form id="transactionInput">
            <div>
                <label for="name">Name:</label>
                <input type="name" id="name" required>  
                 
            </div>
            <div>
                 <label for="date">Date:</label>
                <input type="date" id="date" required> 
            </div>
            <div>
                 <label for="amount">Amount:</label>
                 <input type="number" id="amount" required>
            </div>
            <div>
                <label for="type">Type:</label>
            <select id="type" required>
                <option value="income">Income</option>
                <option value="expense">Expense</option>
            </select>
            </div>

            <button  type="submit" id="add-button">Add Transaction</button>
            <p id="displayMessage"></p>
        </form>

       
            
        <div class="transactions-section">
            <h2>Transactions</h2>
            <ul id="transactions-list">

            </ul>
        </div>

       
    </div>

<script>
const message = document.getElementById("display message")
const unorderedList = document.querySelector("#transactions-list");
const balanceSpan = document.getElementById("balance");
const incomeSpan = document.getElementById("income");
const expenseSpan = document.getElementById("expense");

let entries = JSON.parse(localStorage.getItem("entries")) || [];

const formatter = new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'KSH',
});

function updateTransactions() {
    unorderedList.innerHTML = "";
    entries.forEach((entry, idx) => {
        const list = document.createElement("li");
        list.innerHTML = `
            <div class="name">
                <h4>${entry.name}</h4>
                <p>${entry.date}</p>
            </div>
            <div class="amount ${entry.type}">
                <span>${formatter.format(Number(entry.amount))}</span>
            </div>
            <div class="button">
                <button onclick="deleteTransaction(${idx})">Delete</button>
            </div>
        `;
        unorderedList.appendChild(list);
    });
}

function balancesUpdate() {
    let income = 0;
    let expense = 0;

    entries.forEach(entry => {
        if (entry.type === "income") {
            income += Number(entry.amount);

        } else if (entry.type === "expense") {
            expense += Number(entry.amount);
        }
    });
    incomeSpan.textContent = formatter.format(income);
    expenseSpan.textContent = formatter.format(expense);
    balanceSpan.textContent = formatter.format(income - expense);
}

window.deleteTransaction = function(idx) {
    entries.splice(idx, 1);
    localStorage.setItem("entries", JSON.stringify(entries));
    updateTransactions();
    balancesUpdate();
};

document.getElementById("transactionInput").addEventListener("submit", function (e) {
    e.preventDefault();
    const entry = {
        name: document.getElementById("name").value,
        date: document.getElementById("date").value,
        amount: document.getElementById("amount").value,
        type: document.getElementById("type").value,
    };
    if (!entry.name || !entry.amount) {
        message.textContent = "Invalid Transaction!";
        message.style.color = 'red';
        return;
    }
    message.textContent = "Transaction added successfully!";
    message.style.color = 'green';

    entries.push(entry);
    localStorage.setItem("entries", JSON.stringify(entries));
    renderTransactions();
    updateBalances();


    document.getElementById("name").value = "";
    document.getElementById("date").value = "";
    document.getElementById("amount").value = "";
    document.getElementById("type").value = "income";
});

updateTransactions();
balancesUpdate();
</script>

   
</body>
</html>